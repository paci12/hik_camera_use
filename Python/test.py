import serial
import binascii
import time

def get_from_rs485():
    # 创建串口连接
    ser1 = serial.Serial('COM4', 9600, timeout=1)
    list = [b'0103', b'0103', b'0103', b'0103', b'0104', b'0104', b'0104', b'0104', b'0104', b'0104'
            b'0104', b'0104', b'0104', b'0104', b'0104', b'0105', b'0105', b'0105', b'0105', b'0105'
            b'0104', b'0104', b'0104', b'0104', b'0104', b'0105', b'0105', b'0105', b'0105', b'0105'
            b'0104', b'0104', b'0104', b'0104', b'0104', b'0105', b'0105', b'0105', b'0105', b'0105'
            b'0104', b'0104', b'0104', b'0104', b'0104', b'0105', b'0105', b'0105', b'0105', b'0105'
            # b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01'
            # b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01'
            # b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01'
            # b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01'
            # b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01'
            # b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01'
            # b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01'
            # b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01'
            # b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01',b'01'
            # b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00'
            # b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00'
            # b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00'
            # b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00'
            # b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00'
            # b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00'
            # b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00',b'00'
            b'0005', b'0005', b'0005', b'0005', b'0005', b'0005', b'0005', b'0005', b'0005', b'0005'
            b'0005', b'0005', b'0005', b'0005', b'0005', b'0005', b'0005', b'0005', b'0005', b'0005'
            b'0005', b'0005', b'0005', b'0005', b'0005', b'0005', b'0005', b'0005', b'0005', b'0005'
            b'0105', b'0105', b'0105', b'0105', b'0104', b'0104', b'0104', b'0104', b'0104', b'0104'
            b'0104', b'0104', b'0104', b'0104', b'0104', b'0103', b'0103', b'0103', b'0103', b'0103'
            b'0104', b'0104', b'0104', b'0104', b'0104', b'0103', b'0103', b'0103', b'0103', b'0103'
            b'0003', b'0003', b'0003', b'0003', b'0003', b'0003', b'0003', b'0003', b'0003', b'0003'
            b'0003', b'0003', b'0003', b'0003', b'0003', b'0003', b'0003', b'0003', b'0003', b'0003']

    while True:
        for i in list:
            # 从COM1发送数据到COM2
            ser1.write(i)
            time.sleep(0.1)
            # print('i have written')
        #     # 从COM2接收数据
        #     data = ser2.read(100)
            data = binascii.unhexlify(i)
            print(data[0])
        #     with self.lock:
        #         self.wirerope_move_state.value = data[0]
        #         self.pos_state.value = data[1]
        #         print('state is ', self.wirerope_move_state.value)
        # print('一轮了')


get_from_rs485()